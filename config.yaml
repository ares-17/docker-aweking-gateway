# Docker Awakening Gateway — Test Configuration
#
# This config is used by docker-compose.yml for local testing.
# Mount path: /etc/gateway/config.yaml (set via CONFIG_PATH env var)

gateway:
  port: "8080"
  log_lines: 30
  # discovery_interval: "15s"  # label polling frequency (default: 15s, or DISCOVERY_INTERVAL env var)

containers:

# Example with dependency (uncomment to use):
#  - name: "web-app"
#    host: "app.localhost"
#    target_port: "3000"
#    depends_on: ["postgres"]   # postgres will be started first
#
#  - name: "postgres"
#    target_port: "5432"        # no host needed — dependency-only

# Example group with load balancing (uncomment to use):
# groups:
#   - name: "api-cluster"
#     host: "api.localhost"
#     strategy: "round-robin"   # default: round-robin
#     containers: ["api-1", "api-2"]



  # ------------------------------------------------------------------
  # fail-app: always exits immediately with code 1.
  # Tests: start_timeout expiry → error page.
  # Use a short start_timeout so the error page shows quickly.
  # ------------------------------------------------------------------
  - name: "fail-app"
    host: "fail-app.localhost:8080"
    icon: "docker"
    target_port: "80"
    network: ""         # leave empty to use first available network
    start_timeout: "8s"
    idle_timeout: "0"
    redirect_path: "/"
